[BITS 16]    ; generate 16bit opcode

[ORG 0x7c00] ; where are we in memory?

main:
;entry point
  mov ax,0x0000
  mov ds,ax ;set segment register. we're not actually using it haha
  
  mov si,string ;stream input pointer register
  call printstr

  jmp $ ; jump here (infinite)

;Writes a string starting from [SI]
; and ending with 0
printstr:
  mov ah,0x0e ;print function
  mov bh,0x0  ;page num?
  mov bl, 0x07;normal text
  .nextchar:
    lodsb ;loads next [SI] into AL
    or al,al ;is AL zero?
      jz .break
    int 0x10;print char
  jmp .nextchar
  
  .break:
  ret

string db 'Test string',13,10,0;13=\r 10=\n

times 510-($-$$) db 0 ; 510-(here-7c00)
dw 0xAA55 ;boot signature

;padding for floppy
times 1474048 db 0
